graph TB
    subgraph NPM["NPM Registry"]
        Pkg["get-shit-done-cc<br/>v1.9.13"]
    end

    subgraph Install["Installation (bin - install.js)"]
        CLI["npx get-shit-done-cc"]
        DetectRT["Detect Runtime<br/>Claude Code or OpenCode"]
        DetectScope["Detect Scope<br/>Global or Local"]
        CopyFiles["Copy Files<br/>agents, commands<br/>workflows, references"]
        SetPerms["Update Settings<br/>Permissions, hooks"]
        AddHooks["Add Git Hooks<br/>update checker<br/>statusline"]
    end

    subgraph ClaudeTarget["Claude Code Installation"]
        GlobalClaude["~/.claude/<br/>get-shit-done/"]
        LocalClaude["./.claude/<br/>get-shit-done/"]
        ClaudeSettings["settings.json<br/>Permissions"]
    end

    subgraph OpenTarget["OpenCode Installation"]
        GlobalOpen["~/.config/opencode/<br/>get-shit-done/"]
        OpenConfig["opencode.json<br/>Config"]
    end

    subgraph Hooks["Git Hooks"]
        UpdateHook["gsd-check-update.js<br/>Background version check"]
        StatusHook["gsd-statusline.js<br/>Model, task, context display"]
    end

    NPM --> CLI
    CLI --> DetectRT
    DetectRT -->|"Claude Code"| DetectScope
    DetectRT -->|"OpenCode"| GlobalOpen
    DetectScope -->|"Global"| GlobalClaude
    DetectScope -->|"Local"| LocalClaude
    CopyFiles --> ClaudeSettings
    CopyFiles --> OpenConfig
    SetPerms --> AddHooks
    AddHooks --> UpdateHook
    AddHooks --> StatusHook

    DetectRT --> CopyFiles
    CopyFiles --> GlobalClaude
    CopyFiles --> LocalClaude
    CopyFiles --> GlobalOpen
    SetPerms --> ClaudeSettings
    SetPerms --> OpenConfig

    classDef npmStyle fill:#CB3837,stroke:#A02D2D,color:#fff
    classDef installStyle fill:#4A90D9,stroke:#2C5F8A,color:#fff
    classDef claudeStyle fill:#D4A574,stroke:#B08958,color:#fff
    classDef openStyle fill:#7B68EE,stroke:#5B48CE,color:#fff
    classDef hookStyle fill:#27AE60,stroke:#1E8449,color:#fff

    class Pkg npmStyle
    class CLI,DetectRT,DetectScope,CopyFiles,SetPerms,AddHooks installStyle
    class GlobalClaude,LocalClaude,ClaudeSettings claudeStyle
    class GlobalOpen,OpenConfig openStyle
    class UpdateHook,StatusHook hookStyle
